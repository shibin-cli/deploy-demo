<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>部署测试 demo</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/element-plus@2.1.11/dist/index.css" />

</head>

<body>
    <div id="app">
        <div>
            <el-button type="primary" @click="deploy">部署</el-button>
        </div>
        <div>
            日志信息：
            <pre>{{logInfo}}</pre>
        </div>
    </div>
</body>
<script type="importmap">
{
    "imports": {
        "vue": "https://cdn.jsdelivr.net/npm/vue@3.2.33/dist/vue.esm-browser.js",
        "element": "https://cdn.jsdelivr.net/npm/element-plus@2.1.11/dist/index.full.min.mjs"
    }
}
</script>
<script type="module" src="https://cdn.jsdelivr.net/npm/vue@3.2.33/dist/vue.esm-browser.js"></script>
<script src="https://cdn.jsdelivr.net/npm/axios@0.27.2/dist/axios.min.js"></script>
<script type="module">
    import { createApp } from 'vue'
    import element from 'element'
    const App = {
        data() {
            return {
                logInfo: ''
            }
        },
        methods: {
            deploy() {
                this.logInfo = '后端部署中，请稍等...'
                axios.post('/deploy')
                    .then((res) => {
                        // 部署完成，返回 log
                        console.log(res.data);
                        this.logInfo = res.data.msg
                    })
                    .catch(function (err) {
                        console.log(err);
                    })
            }
        }
    }
    const app = createApp(App)
    app
        .use(element)
        .mount('#app')
</script>

</html>
